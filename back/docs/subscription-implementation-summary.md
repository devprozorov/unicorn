# –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–∫–∏

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

### 1. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Robokassa**
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–ª–∞—Ç–µ–∂–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–µ–π Result/Success URL
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ callback'–æ–≤

### 2. **–ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö**
- `Subscription` - —Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–ø–∏—Å–∫–∞—Ö
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `Vacancy` –∏ `Resume` —Å –ø–æ–ª—è–º–∏ `isPremium` –∏ `colorCode`

### 3. **–õ–∏–º–∏—Ç—ã**
- **–ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏**: 2 –≤–∞–∫–∞–Ω—Å–∏–∏/—Ä–µ–∑—é–º–µ
- **–° –ø–æ–¥–ø–∏—Å–∫–æ–π**: 16 –≤–∞–∫–∞–Ω—Å–∏–π/—Ä–µ–∑—é–º–µ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

### 4. **Premium —Å—Ç–∞—Ç—É—Å**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ `isPremium: true` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–º
- –ó–æ–ª–æ—Ç–æ–π —Ü–≤–µ—Ç `#FFD700` –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –≤ —Å–ø–∏—Å–∫–∞—Ö –≤–∞–∫–∞–Ω—Å–∏–π

### 5. **API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**
```
GET  /api/subscription/status              - –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏
POST /api/subscription/create-payment      - –°–æ–∑–¥–∞—Ç—å –ø–ª–∞—Ç–µ–∂
POST /api/subscription/robokassa/result    - Callback –æ—Ç Robokassa
GET  /api/subscription/robokassa/success   - Success redirect
GET  /api/subscription/robokassa/fail      - Fail redirect
```

### 6. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**
–î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env`:
```env
ROBOKASSA_MERCHANT_LOGIN=your_merchant_login
ROBOKASSA_PASSWORD1=your_password_1
ROBOKASSA_PASSWORD2=your_password_2
ROBOKASSA_TEST_MODE=true
SUBSCRIPTION_PRICE=990.00
SUBSCRIPTION_DURATION_DAYS=30
```

### 7. **–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞**
Premium –≤–∞–∫–∞–Ω—Å–∏–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è **–≤—ã—à–µ** –æ–±—ã—á–Ω—ã—Ö –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å–ø–∏—Å–∫–∞.

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ/–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

### –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:
- `internal/models/subscription.go` - –º–æ–¥–µ–ª—å –ø–æ–¥–ø–∏—Å–∫–∏
- `internal/security/robokassa.go` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Robokassa
- `internal/repo/subscription_repo.go` - —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –ø–æ–¥–ø–∏—Å–æ–∫
- `internal/modules/subscription/module.go` - –º–æ–¥—É–ª—å –ø–æ–¥–ø–∏—Å–∫–∏
- `docs/subscription-api-spec.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- `internal/models/vacancy.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã isPremium, colorCode
- `internal/models/resume.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã isPremium, colorCode
- `internal/db/database.go` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–ª–µ–∫—Ü–∏—è subscriptions
- `internal/repo/vacancy_repo.go` - UpdateAllByCompanyID, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- `internal/repo/resume_repo.go` - UpdateAllByUserID
- `internal/modules/vacancies/module.go` - –Ω–æ–≤—ã–µ –ª–∏–º–∏—Ç—ã –∏ premium
- `internal/modules/resumes/module.go` - –Ω–æ–≤—ã–µ –ª–∏–º–∏—Ç—ã –∏ premium
- `internal/config/config.go` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Robokassa
- `cmd/server/main.go` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –º–æ–¥—É–ª—è –ø–æ–¥–ø–∏—Å–∫–∏
- `.env` - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ Robokassa

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏:

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂ —á–µ—Ä–µ–∑ `POST /api/subscription/create-payment`
2. **–°–∏—Å—Ç–µ–º–∞** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É Robokassa
3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ Robokassa
4. **Robokassa** –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç callback –Ω–∞ `POST /api/subscription/robokassa/result`
5. **–°–∏—Å—Ç–µ–º–∞**:
   - –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ø–∏—Å—å
   - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ "paid"
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `subscription.active = true` —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –¥–∞—Ç—É –æ–∫–æ–Ω—á–∞–Ω–∏—è (+ 30 –¥–Ω–µ–π)
   - –û–±–Ω–æ–≤–ª—è–µ—Ç –í–°–ï —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏/—Ä–µ–∑—é–º–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ premium

## üé® –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ:

### Vacancy/Resume —Å –ø–æ–¥–ø–∏—Å–∫–æ–π:
```json
{
  "vacancyId": "...",
  "title": "Senior Developer",
  "isPremium": true,
  "colorCode": "#FFD700",
  ...
}
```

–ù–∞ —Ñ—Ä–æ–Ω—Ç–µ —ç—Ç–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è:
- –ó–æ–ª–æ—Ç–æ–π —Ä–∞–º–∫–∏/—Ñ–æ–Ω–∞
- –ò–∫–æ–Ω–∫–∏ ‚≠ê PREMIUM
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤—ã—à–µ –≤ —Å–ø–∏—Å–∫–µ

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:

- ‚úÖ MD5 –ø–æ–¥–ø–∏—Å—å –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ callback'–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

## üìä –ß—Ç–æ –¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∞:

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –ë–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ | –° –ø–æ–¥–ø–∏—Å–∫–æ–π |
|----------|--------------|-------------|
| –õ–∏–º–∏—Ç –≤–∞–∫–∞–Ω—Å–∏–π | 2 | 16 |
| –õ–∏–º–∏—Ç —Ä–µ–∑—é–º–µ | 2 | 16 |
| Premium —Å—Ç–∞—Ç—É—Å | ‚ùå | ‚úÖ |
| –¶–≤–µ—Ç–æ–≤–∞—è –º–µ—Ç–∫–∞ | ‚ùå | ‚úÖ (#FFD700) |
| –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ø–æ–∏—Å–∫–µ | ‚ùå | ‚úÖ |

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

–°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º.
–í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ —É—Ä–æ–≤–Ω–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏.

–î–ª—è production –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ:
1. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ Robokassa –≤ `.env`
2. –£–∫–∞–∑–∞—Ç—å URLs –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ Robokassa
3. –û—Ç–∫–ª—é—á–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º `ROBOKASSA_TEST_MODE=false`
